(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[980],{92299:function(r,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/await_tree",function(){return n(30832)}])},55509:function(r,e,n){"use strict";n.d(e,{OL:function(){return l},X8:function(){return u},xv:function(){return p}});var t=n(47568),c=n(34051),a=n.n(c),o=n(40965),i=n(69333);function u(){return s.apply(this,arguments)}function s(){return(s=(0,t.Z)(a().mark((function r(){var e;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i.Z.get("/api/metrics/cluster");case 2:return e=r.sent,r.abrupt("return",e);case 4:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function p(){return f.apply(this,arguments)}function f(){return(f=(0,t.Z)(a().mark((function r(){var e;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i.Z.get("/api/clusters/1");case 2:return e=r.sent.map(o.cX.fromJSON),r.abrupt("return",e);case 4:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function l(){return d.apply(this,arguments)}function d(){return(d=(0,t.Z)(a().mark((function r(){var e;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i.Z.get("/api/clusters/2");case 2:return e=r.sent.map(o.cX.fromJSON),r.abrupt("return",e);case 4:case"end":return r.stop()}}),r)})))).apply(this,arguments)}},52783:function(r,e,n){"use strict";n.d(e,{Z:function(){return u}});var t=n(47568),c=n(34051),a=n.n(c),o=n(66479),i=n(67294);function u(r){var e=(0,i.useState)(),n=e[0],c=e[1],u=(0,o.pm)();return(0,i.useEffect)((function(){var e=function(){var e=(0,t.Z)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r();case 3:n=e.sent,c(n),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),u({title:"Error Occurred",description:e.t0.toString(),status:"error",duration:5e3,isClosable:!0}),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[u,r]),{response:n}}},30832:function(r,e,n){"use strict";n.r(e),n.d(e,{default:function(){return S}});var t=n(47568),c=n(828),a=n(34051),o=n.n(a),i=n(85893),u=n(40639),s=n(83234),p=n(57026),f=n(47741),l=n(19604),d=n(96486),v=n.n(d),h=n(9008),T=n.n(h),m=n(67294),x=n(5662),w=n(5330);var j={fromJSON:function(r){return{actorTraces:k(r.actorTraces)?Object.entries(r.actorTraces).reduce((function(r,e){var n=(0,c.Z)(e,2),t=n[0],a=n[1];return r[Number(t)]=String(a),r}),{}):{},rpcTraces:k(r.rpcTraces)?Object.entries(r.rpcTraces).reduce((function(r,e){var n=(0,c.Z)(e,2),t=n[0],a=n[1];return r[t]=String(a),r}),{}):{},compactionTaskTraces:k(r.compactionTaskTraces)?Object.entries(r.compactionTaskTraces).reduce((function(r,e){var n=(0,c.Z)(e,2),t=n[0],a=n[1];return r[t]=String(a),r}),{}):{}}},toJSON:function(r){var e={actorTraces:{}};return r.actorTraces&&Object.entries(r.actorTraces).forEach((function(r){var n=(0,c.Z)(r,2),t=n[0],a=n[1];e.actorTraces[t]=a})),e.rpcTraces={},r.rpcTraces&&Object.entries(r.rpcTraces).forEach((function(r){var n=(0,c.Z)(r,2),t=n[0],a=n[1];e.rpcTraces[t]=a})),e.compactionTaskTraces={},r.compactionTaskTraces&&Object.entries(r.compactionTaskTraces).forEach((function(r){var n=(0,c.Z)(r,2),t=n[0],a=n[1];e.compactionTaskTraces[t]=a})),e},fromPartial:function(r){var e,n,t,a={actorTraces:{},rpcTraces:{},compactionTaskTraces:{}};return a.actorTraces=Object.entries(null!==(e=r.actorTraces)&&void 0!==e?e:{}).reduce((function(r,e){var n=(0,c.Z)(e,2),t=n[0],a=n[1];return void 0!==a&&(r[Number(t)]=String(a)),r}),{}),a.rpcTraces=Object.entries(null!==(n=r.rpcTraces)&&void 0!==n?n:{}).reduce((function(r,e){var n=(0,c.Z)(e,2),t=n[0],a=n[1];return void 0!==a&&(r[t]=String(a)),r}),{}),a.compactionTaskTraces=Object.entries(null!==(t=r.compactionTaskTraces)&&void 0!==t?t:{}).reduce((function(r,e){var n=(0,c.Z)(e,2),t=n[0],a=n[1];return void 0!==a&&(r[t]=String(a)),r}),{}),a}};var g="undefined"!==typeof g?g:"undefined"!==typeof self?self:window;function k(r){return"object"===typeof r&&null!==r}var Z=n(69333),b=n(55509),O=n(52783);function S(){var r=(0,O.Z)(b.OL).response,e=(0,m.useState)(),n=e[0],a=e[1],d=(0,m.useState)(""),h=d[0],g=d[1];(0,m.useEffect)((function(){r&&!n&&r.length>0&&a(r[0].id)}),[r,n]);var k=function(){var r=(0,t.Z)(o().mark((function r(){var e,t,a,i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e="Await-Tree Dump of Compute Node ".concat(n,":"),g(void 0),r.prev=3,r.t0=j,r.next=7,Z.Z.get("/api/monitor/await_tree/".concat(n));case 7:r.t1=r.sent,a=r.t0.fromJSON.call(r.t0,r.t1),i=v()(a.actorTraces).entries().map((function(r){var e=(0,c.Z)(r,2),n=e[0],t=e[1];return"[Actor ".concat(n,"]\n").concat(t)})).join("\n"),u=v()(a.rpcTraces).entries().map((function(r){var e=(0,c.Z)(r,2),n=e[0],t=e[1];return"[RPC ".concat(n,"]\n").concat(t)})).join("\n"),t="".concat(e,"\n\n").concat(i,"\n").concat(u),r.next=17;break;case 14:r.prev=14,r.t2=r.catch(3),t="".concat(e,"\n\nError: ").concat(r.t2.message);case 17:g(t);case 18:case"end":return r.stop()}}),r,null,[[3,14]])})));return function(){return r.apply(this,arguments)}}(),S=(0,i.jsxs)(u.kC,{p:3,height:"calc(100vh - 20px)",flexDirection:"column",children:[(0,i.jsx)(w.Z,{children:"Await Tree Dump"}),(0,i.jsxs)(u.kC,{flexDirection:"row",height:"full",width:"full",children:[(0,i.jsx)(u.gC,{mr:3,spacing:3,alignItems:"flex-start",width:200,height:"full",children:(0,i.jsxs)(s.NI,{children:[(0,i.jsx)(s.lX,{children:"Compute Nodes"}),(0,i.jsxs)(u.gC,{children:[(0,i.jsx)(p.Ph,{onChange:function(r){return a(parseInt(r.target.value))},children:r&&r.map((function(r){var e,n;return(0,i.jsxs)("option",{value:r.id,children:["(",r.id,") ",null===(e=r.host)||void 0===e?void 0:e.host,":",null===(n=r.host)||void 0===n?void 0:n.port]},r.id)}))}),(0,i.jsx)(f.zx,{onClick:function(r){return k()},width:"full",children:"Dump"})]})]})}),(0,i.jsx)(u.xu,{flex:1,height:"full",ml:3,overflowX:"scroll",overflowY:"scroll",children:void 0===h?(0,i.jsx)(x.Z,{}):(0,i.jsx)(l.ZP,{language:"sql",options:{fontSize:13,readOnly:!0,renderWhitespace:"boundary",wordWrap:"on"},defaultValue:'Select a compute node and click "Dump"...',value:h})})]})]});return(0,i.jsxs)(m.Fragment,{children:[(0,i.jsx)(T(),{children:(0,i.jsx)("title",{children:"Await Tree Dump"})}),S]})}}},function(r){r.O(0,[662,422,836,774,888,179],(function(){return e=92299,r(r.s=e);var e}));var e=r.O();_N_E=e}]);